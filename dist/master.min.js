var application=angular.module("application",["ngRoute","ngResource","ngSanitize","ngMessages"],["$httpProvider",function(e){}]);application.config(["$routeProvider",function(e){e.when("/example",{templateUrl:"assets/templates/example.html",title:"Example",controller:"ExampleController",controllerAs:"ExampleCtrl"}).otherwise({redirectTo:"/"})}]),application.service("SessionService",["$rootScope","$location","$http","$q","$timeout","$window","ToolsService","ModalService",function(e,o,t,i,n,a,s,r){var l,c=this;c.isLoggedIn=!1,c.loginException={},c.loginData={},c.clearLoginData=function(){c.loginData={}},c.sessionData={},c.clearSessionData=function(){c.sessionData={}},c.loginException={},c.clearLoginException=function(){c.loginException={}},e.user="undefined"!=typeof USER?JSON.parse(USER):void 0,e.logout="undefined"!=typeof LOGOUT?JSON.parse(LOGOUT):void 0,c.login=function(){var n=i.defer();return c.clearLoginException(),c.isLoggedIn?(e.user="undefined"!=typeof USER?JSON.parse(USER):void 0,n.resolve()):t.post(SERVICES+"login.php",c.loginData).success(function(t){"undefined"==typeof t.exception?(c.sessionData=t,c.clearLoginData(),c.updateTimeout(),c.isLoggedIn=!0,e.user=t,n.resolve()):(c.loginException=t.exception,n.reject()),angular.isDefined(e.logout)&&delete o.$$search.originalPath}),n.promise},c.getFBUrl=function(){var e=i.defer();return c.isLoggedIn?e.resolve():t.post(SERVICES+"facebook/get-login-url.php").success(function(o){angular.isUndefined(o.exception)?(c.fbUrl=o.fbUrl,isSuccess=!0,e.resolve()):(c.loginException=o.exception,e.reject())}),e.promise},c.logout=function(){var o=i.defer();return c.isLoggedIn?t.post(SERVICES+"logout.php").success(function(o){if("undefined"==typeof o.exception)c.clearSessionData(),n.cancel(l),a.location.reload();else switch(o.exception.code){default:e.errorMessage="We are sorry! Unexpected Service Error."}})["finally"](function(){o.resolve()}):o.resolve(),o.promise},c.updateTimeout=function(){n.cancel(l);var e={delta:Date.now()-c.lastActivity};t.post(SERVICES+"user.php",e).success(function(e){"undefined"==typeof e.exception&&e.timeRemaining>0?l=n(function(){c.updateTimeout()},e.timeRemaining):c.logout()})},c.lastActivity=Date.now(),$(document).on("click keypress scroll",function(e){c.lastActivity=Date.now()}),e.user?(c.isLoggedIn=!0,c.sessionData=e.user,s.isEmpty(c.sessionData.avatar)&&(c.sessionData.avatar="web/assets/images/user-default-avatar.png"),c.updateTimeout()):e.logout&&"SOFT_TIMEOUT"===e.logout.expireMethod&&r.openModal("web/components/modals/logged-out.php"),c.loginMethods={ADMINISTRATIVE:"ADMINISTRATIVE",FACEBOOK:"FACEBOOK",INTERACTIVE:"INTERACTIVE",MEMBER_EMULATION:"MEMBER_EMULATION",PROMO_EMAIL:"PROMO_EMAIL"}}]),application.controller("ExampleController",["$rootScope",function(e){this.message="Hi from the Example Controller! :)"}]),application.directive("exampleDirective",[function(){return{restrict:"A",template:"<div>Example Directive</div>"}}]);
//# sourceMappingURL=master.min.js.map
